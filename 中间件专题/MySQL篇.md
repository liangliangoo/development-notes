# MySQL 专题篇

## 索引

## sql
### group by 发生了什么

MySQL group by 实现方式有三种：1、松散索引；2、紧凑索引；3、临时文件（文件排序）

#### 1、松散索引
 MySQL group by 语句在利用索引时，group by （多个字段的时候，必须满足最左前缀原则）可根据索引，即可对数据分组，此时完全不用去访问表的数据值（索引健对应的数据）

#### 2、紧凑索引

 当group by引用的字段无法构成所建索引的最左前缀索引时，也就是说group by不能利用索引时。如何where语句（如果有的话）弥补了这种差距，比如：
group by 引用的字段为（c2，c3），而索引为（c1，c2，c3）。此时如果where语句限定了c1=a（某一个值），那么此时mysql的执行过程为先根据where语句进行一次选择，

对选出来的结果集，可以利用索引。这种方式，从整体上来说，group by并没有利用索引，但是从过程来说，在选出的结果中利用了索引，这种方式就是紧凑索引。

#### 3、临时文件

满足group by 子句 最一般的方法就是扫描整张表 然后创建新的临时表，临时表中 每个组的所有行是连续的， 然后使用该临时表找到对应的组 应用 累计函数（如果有）


### order by 发生了什么

#### 1、order by 字段 不存在索引
全表扫描，如果所查询字段所占内存数 小于 max_length_for_sort_data 先讲加载到的数据放入sort_buffer当中，当内存不足会写入临时表中，如果大于max_length_for_sort_data 则会直接写入文件后排序，内存中的数据一般采用的是快排、文件中的数据会采用归并排序

#### 2、order by 字段是索引
##### 1、全字段排序
##### 2、rowId 排序
 

## MySQL中的日志

### redo log & undo log & binlog

## MySQL 2PC