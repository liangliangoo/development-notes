# 代码重构技巧
## 重构原则
### 1、不要修改已存在的方法签名

#### 业务背景
有一个获取获取亲密度> x(int) 的好友列表 接口，但是我需要传递新的数据类型 具体的处理逻辑和之前相同，都是获取亲密度 > x (double) 的接口列表 我的重构方案如下：
```java
    /**
     * 之前存在的接口逻辑是这样的 通过指定亲密度获取列表 但是又有参数类型可能不相同
     * 亲密度本身就是通过double 存储的   新的需求传递的亲密度不是int 
     *
     * @param uid
     * @param limitIntimacy
     * @param limit
     * @return
     */
    public List<IntimacyUserInfoVO> getUserInfoByLimitIntimacy(Long uid, Integer limitIntimacy, Integer limit) {
        return this.findByDb(uid,limitIntimacy,limit);
    }

    // 方法重构后
    /**
     * 获取大于指定亲密度的亲密用户(读库-按亲密度倒序)
     *
     * @param uid
     * @param limitIntimacy
     * @param limit
     * @return
     */
    public List<IntimacyUserInfoVO> getUserInfoByLimitIntimacy(Long uid, Integer limitIntimacy, Integer limit) {
        return this.getUserInfoByLimitIntimacy(uid, limitIntimacy.doubleValue(), limit);
    }

    // 通用的业务逻辑
    public List<IntimacyUserInfoVO> getUserInfoByLimitIntimacy(Long uid, Double limitIntimacy, Integer limit) {
        // 业务逻辑 省略
        return this.findByDb(uid,limitIntimacy,limit);;
    }
```