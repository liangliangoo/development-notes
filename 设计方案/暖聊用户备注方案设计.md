# 暖聊 备注方案设计
## 需求背景
当用户关系达到一定权益的时候，可以解锁给好友设置备注的功能，在消息列表、用户动态中都能看到自己设置的备注

## 表结构设计

```sql
create table user_remarks(
    id bigint primary key auto_increment,
    app_id bigint not null comment '应用ID',
    union_id varchar(128) not null comment '应用唯一标识',
    uid bigint not null comment '用户id',
    target_uid bigint not null comment '目标用户ID',
    nick_name varchar(1024) default '' comment 'uid 给 target_uid 的备注',
    background varchar(1024) default '' comment 'uid 设置的聊天背景',
    ext_data        varchar(1024)                         null comment '扩展字段',
    create_time     datetime    default CURRENT_TIMESTAMP null comment '创建时间',
    update_time     datetime    default CURRENT_TIMESTAMP null on update CURRENT_TIMESTAMP comment '更新时间',
    unique index idx_appid_unionid_uid_targetid(app_id,union_id,uid,target_uid)
) comment '用户备注表';
```

## 展示设计
在各个展示好友信息数据中添加了nickname等信息，当nickname存在的时候，就展示，不存在，就按照来逻辑走。
